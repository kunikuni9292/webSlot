<!DOCTYPE html>
<html lang="ja-JP">

<head>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.2.4/jquery.min.js"></script>
    <title>動画集__連続再生サンプル</title>

    <script>
        // 動画ファイル名（URL）配列
        var slst = new Array(
            "./movieReach/sample1",
            "./movieReach/sample2"
        );
        // 表示
        // 再生開始番号を登録
        // var idx = 0;
        var idx = Math.floor(Math.random() * slst.length);

        // ページを開いたときに再生開始する。
        window.addEventListener("load", init_s, false);

        function init_s() {
            next(idx);
        }
        function next(idx) {
            // リスト数分削除
            const target = document.getElementById('video');

            // videoタグ取得
            var video = document.getElementById("video");

            // // videoタグを書き換える
            video.innerHTML = "<video id=\"videos\" width=\"400\" height=\"220\" controls autoplay muted >\n<source src=\"" +
                slst[idx] + ".mp4\">\n</video>\n";

            // videosタグ取得
            videos = document.getElementById("videos");

            // 終了イベント取得設定
            videos.addEventListener("ended", playerEvent, false);

        }
        // イベント取得
        function playerEvent(event) {
            // イベントタイプ判定
            if (event.type == "ended") {
                // 終了なので、次へ
                idx++;
                if (idx < slst.length) {
                    next(idx);
                }
                // エンドレスに再生すときは、下記のコードを追加する
                // else {
                //     idx = 0;
                //     next(idx);
                // }
            }
        }

    </script>
</head>

<body>
    <!-- プレイヤー部分 -->
    <div id="video" style="width: 400px; height: 220px;"></div>
</body>

</html>